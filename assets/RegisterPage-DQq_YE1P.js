import{r as n,x as R,y as N,z as P,n as E,a as o,s as i,b as s,q as F,i as v,f as p,v as w,p as g,t as c,A as V,h as T,m as A,w as O}from"./index-BahtY7yE.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={setup(){const b=n(""),e=n(""),y=n(""),a=n(""),u=n("url"),d=n(""),f=n(!1),l=R(),t=N({name:"",email:"",password:"",avatar:""});P(a,r=>{u.value==="url"&&r&&(d.value=r)}),P(u,r=>{r==="url"&&a.value?d.value=a.value:r==="file"&&(d.value="")});const C=()=>{let r=!0;return t.name="",t.email="",t.password="",t.avatar="",b.value.length<2&&(t.name="Name must be at least 2 characters long",r=!1),/^[\w.-]+@[\w.-]+\.\w{2,}$/.test(e.value)||(t.email="Please enter a valid email address",r=!1),y.value.length<6&&(t.password="Password must be at least 6 characters long",r=!1),u.value==="url"&&a.value&&!/^https?:\/\/.+/.test(a.value)&&(t.avatar="Please enter a valid URL",r=!1),r};return{name:b,email:e,password:y,avatar:a,avatarType:u,avatarPreview:d,errors:t,loading:f,register:async()=>{if(C())try{f.value=!0;const r=JSON.parse(localStorage.getItem("users")||"[]");if(r.some(h=>h.email===e.value)){t.email="Email đã được sử dụng";return}const m={id:Date.now(),name:b.value,email:e.value,password:y.value,avatar:a.value||"https://via.placeholder.com/32"};r.push(m),localStorage.setItem("users",JSON.stringify(r)),alert("Đăng ký thành công! Vui lòng đăng nhập."),l.push("/login")}catch(r){console.error("Registration error:",r),t.email="Có lỗi xảy ra. Vui lòng thử lại."}finally{f.value=!1}},handleFileUpload:r=>{var _;const m=(_=r.target.files)==null?void 0:_[0];if(!m)return;if(m.size>2*1024*1024){t.avatar="File size must be less than 2MB";return}if(!m.type.startsWith("image/")){t.avatar="Please upload an image file";return}const h=new FileReader;h.onload=k=>{var x,U;d.value=(x=k.target)==null?void 0:x.result,a.value=(U=k.target)==null?void 0:U.result},h.readAsDataURL(m)}}}},I={class:"container mt-5"},L={class:"row justify-content-center"},M={class:"col-md-6"},q={class:"card shadow"},z={class:"card-body"},D={class:"mb-3"},j={key:0,class:"invalid-feedback"},J={class:"mb-3"},W={key:0,class:"invalid-feedback"},G={class:"mb-3"},H={key:0,class:"invalid-feedback"},K={class:"mb-3"},Q={class:"d-flex align-items-center mb-2"},X=["src"],Y={key:1,class:"rounded-circle me-3 bg-light d-flex align-items-center justify-content-center",style:{width:"64px",height:"64px"}},Z={class:"mb-2"},$={class:"form-check"},ee={class:"form-check"},ae={key:0},se={key:0,class:"invalid-feedback"},re={key:1},le={key:0,class:"invalid-feedback"},te={class:"d-grid gap-2"},oe=["disabled"],ie={class:"text-center mt-3"};function ne(b,e,y,a,u,d){const f=E("router-link");return i(),o("div",I,[s("div",L,[s("div",M,[s("div",q,[s("div",z,[e[19]||(e[19]=s("h2",{class:"text-center mb-4"},"Create Account",-1)),s("form",{onSubmit:e[7]||(e[7]=F((...l)=>a.register&&a.register(...l),["prevent"]))},[s("div",D,[e[8]||(e[8]=s("label",{class:"form-label"},"Name",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.name=l),class:g(["form-control",{"is-invalid":a.errors.name}]),placeholder:"Enter your name",required:""},null,2),[[w,a.name]]),a.errors.name?(i(),o("div",j,c(a.errors.name),1)):p("",!0)]),s("div",J,[e[9]||(e[9]=s("label",{class:"form-label"},"Email",-1)),v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.email=l),type:"email",class:g(["form-control",{"is-invalid":a.errors.email}]),placeholder:"Enter your email",required:""},null,2),[[w,a.email]]),a.errors.email?(i(),o("div",W,c(a.errors.email),1)):p("",!0)]),s("div",G,[e[10]||(e[10]=s("label",{class:"form-label"},"Password",-1)),v(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.password=l),type:"password",class:g(["form-control",{"is-invalid":a.errors.password}]),placeholder:"Enter your password",required:""},null,2),[[w,a.password]]),a.errors.password?(i(),o("div",H,c(a.errors.password),1)):p("",!0)]),s("div",K,[e[16]||(e[16]=s("label",{class:"form-label"},"Profile Picture",-1)),s("div",Q,[a.avatarPreview?(i(),o("img",{key:0,src:a.avatarPreview,class:"rounded-circle me-3",style:{width:"64px",height:"64px","object-fit":"cover"}},null,8,X)):(i(),o("div",Y,e[11]||(e[11]=[s("i",{class:"bi bi-person"},null,-1)])))]),s("div",Z,[s("div",$,[v(s("input",{class:"form-check-input",type:"radio",name:"avatarType",id:"urlOption",value:"url","onUpdate:modelValue":e[3]||(e[3]=l=>a.avatarType=l)},null,512),[[V,a.avatarType]]),e[12]||(e[12]=s("label",{class:"form-check-label",for:"urlOption"}," Use Image URL ",-1))]),s("div",ee,[v(s("input",{class:"form-check-input",type:"radio",name:"avatarType",id:"fileOption",value:"file","onUpdate:modelValue":e[4]||(e[4]=l=>a.avatarType=l)},null,512),[[V,a.avatarType]]),e[13]||(e[13]=s("label",{class:"form-check-label",for:"fileOption"}," Upload Image ",-1))])]),a.avatarType==="url"?(i(),o("div",ae,[v(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>a.avatar=l),type:"url",class:g(["form-control",{"is-invalid":a.errors.avatar}]),placeholder:"https://..."},null,2),[[w,a.avatar]]),a.errors.avatar?(i(),o("div",se,c(a.errors.avatar),1)):p("",!0),e[14]||(e[14]=s("small",{class:"text-muted"},"Enter an image URL",-1))])):(i(),o("div",re,[s("input",{type:"file",class:g(["form-control",{"is-invalid":a.errors.avatar}]),accept:"image/*",onChange:e[6]||(e[6]=(...l)=>a.handleFileUpload&&a.handleFileUpload(...l))},null,34),a.errors.avatar?(i(),o("div",le,c(a.errors.avatar),1)):p("",!0),e[15]||(e[15]=s("small",{class:"text-muted"},"Upload an image file (max 2MB)",-1))]))]),s("div",te,[s("button",{class:"btn btn-success",disabled:a.loading},c(a.loading?"Creating Account...":"Create Account"),9,oe)]),s("div",ie,[s("p",null,[e[18]||(e[18]=T("Already have an account? ")),A(f,{to:"/login"},{default:O(()=>e[17]||(e[17]=[T("Login here")])),_:1,__:[17]})])])],32)])])])])])}const ue=S(B,[["render",ne],["__scopeId","data-v-4386b049"]]);export{ue as default};
