import{d as J,u as K,r as y,c as u,o as R,a,b as t,e as X,f as P,g as Y,w as S,h as c,i as x,v as G,j as D,k as $,F as h,l as _,t as n,m as I,n as O,p as V,q as w,s as i}from"./index-BahtY7yE.js";import{u as W}from"./Post-Baz_lnpz.js";const Z="/assets/Introduction_to_Vue_JS_959ca27287-DDcYC7SP.jpg",tt={class:"bg-primary text-white py-5 mb-5 rounded"},et={class:"container"},st={class:"row align-items-center"},ot={class:"col-lg-6"},lt={class:"row"},nt={class:"col-lg-8"},it={class:"card mb-4"},at={class:"card-body"},ct={class:"row g-3"},dt={class:"col-md-4"},rt={class:"col-md-3"},ut={class:"col-md-3"},vt={class:"col-md-2"},mt={key:0,class:"mb-5"},gt={class:"row"},ht={class:"card border-warning"},_t=["src"],bt={class:"card-body"},ft={class:"d-flex justify-content-between align-items-start mb-2"},pt={class:"badge bg-warning text-dark"},yt={class:"text-muted"},xt={class:"card-title"},wt={class:"card-text"},kt={class:"d-flex justify-content-between align-items-center"},Ct={class:"d-flex align-items-center"},Pt=["src"],St={class:"mb-4"},Dt={key:0,class:"text-center py-5"},Vt={key:1,class:"row"},jt={class:"card h-100"},Mt=["src"],Nt={class:"card-body d-flex flex-column"},Bt={class:"d-flex justify-content-between align-items-start mb-2"},Tt={class:"badge bg-primary"},$t={class:"text-muted"},It={class:"card-title"},At={class:"card-text flex-grow-1"},Lt={class:"d-flex justify-content-between align-items-center"},Ut={class:"d-flex align-items-center"},Ht=["src"],Ft={class:"card-footer bg-transparent"},Qt={class:"d-flex justify-content-between text-muted"},qt={key:1,"aria-label":"Page navigation"},zt={class:"pagination justify-content-center"},Et=["onClick"],Jt={class:"col-lg-4"},Kt={class:"card mb-4"},Rt={class:"card-body"},Xt=["src"],Yt={class:"flex-grow-1"},Gt={class:"mb-1"},Ot={class:"text-muted"},Wt={class:"card"},Zt={class:"card-body"},te={class:"d-flex flex-column"},ee=["onClick"],se={class:"badge bg-primary"},ie=J({__name:"HomePage",setup(oe){const o=W(),A=K(),b=y(""),g=y(""),f=y("newest"),v=y(6),j=u(()=>o.featuredPosts),M=u(()=>o.paginatedPosts),p=u(()=>o.totalPages),d=u(()=>o.currentPage),L=u(()=>o.popularPosts),U=u(()=>[{value:"technology",label:"Công nghệ",count:o.posts.filter(l=>l.category==="technology").length},{value:"lifestyle",label:"Lối sống",count:o.posts.filter(l=>l.category==="lifestyle").length},{value:"travel",label:"Du lịch",count:o.posts.filter(l=>l.category==="travel").length},{value:"food",label:"Ẩm thực",count:o.posts.filter(l=>l.category==="food").length}]),H=u(()=>{const l=[],s=Math.max(1,d.value-2),m=Math.min(p.value,d.value+2);for(let e=s;e<=m;e++)l.push(e);return l}),F=()=>{o.setSearch(b.value)},Q=()=>{o.setCategory(g.value)},q=()=>{o.setSortBy(f.value)},z=()=>{o.setPagination(1,v.value)},k=l=>{l>=1&&l<=p.value&&o.setPagination(l,v.value)},E=l=>{g.value=l,o.setCategory(l),o.setPagination(1,v.value)},N=l=>{const s=new Date(l),e=Math.floor((new Date().getTime()-s.getTime())/1e3);if(e<60)return"Vừa xong";const r=Math.floor(e/60);if(r<60)return`${r} phút trước`;const C=Math.floor(r/60);if(C<24)return`${C} giờ trước`;const T=Math.floor(C/24);return T<7?`${T} ngày trước`:s.toLocaleDateString("vi-VN")},B=l=>{o.incrementViews(l)};return R(()=>{o.loadPosts(),b.value=o.searchQuery,g.value=o.selectedCategory,f.value=o.sortBy,v.value=o.postsPerPage}),(l,s)=>{const m=O("router-link");return i(),a("div",null,[t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[s[7]||(s[7]=t("h1",{class:"display-4 fw-bold"},"Chào mừng đến với Blog của chúng tôi",-1)),s[8]||(s[8]=t("p",{class:"lead"},"Nơi chia sẻ kiến thức, kinh nghiệm và những câu chuyện thú vị",-1)),Y(A).isAuthenticated?P("",!0):(i(),X(m,{key:0,to:{name:"Register"},class:"btn btn-light btn-lg"},{default:S(()=>s[6]||(s[6]=[c(" Tham gia ngay ")])),_:1,__:[6]}))]),s[9]||(s[9]=t("div",{class:"col-lg-6"},[t("img",{src:Z,class:"img-fluid rounded",alt:"Technology Hero Image",style:{"box-shadow":"0 10px 30px rgba(0,0,0,0.2)"}})],-1))])])]),t("div",lt,[t("div",nt,[t("div",it,[t("div",at,[t("div",ct,[t("div",dt,[x(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>b.value=e),onInput:F,class:"form-control",placeholder:"Tìm kiếm bài viết..."},null,544),[[G,b.value]])]),t("div",rt,[x(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>g.value=e),onChange:Q,class:"form-select"},s[10]||(s[10]=[$('<option value="">Tất cả danh mục</option><option value="technology">Công nghệ</option><option value="lifestyle">Lối sống</option><option value="travel">Du lịch</option><option value="food">Ẩm thực</option>',5)]),544),[[D,g.value]])]),t("div",ut,[x(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>f.value=e),onChange:q,class:"form-select"},s[11]||(s[11]=[$('<option value="newest">Mới nhất</option><option value="oldest">Cũ nhất</option><option value="views">Xem nhiều</option><option value="comments">Nhiều bình luận</option><option value="likes">Nhiều like</option>',5)]),544),[[D,f.value]])]),t("div",vt,[x(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),onChange:z,class:"form-select"},s[12]||(s[12]=[t("option",{value:"6"},"6/trang",-1),t("option",{value:"12"},"12/trang",-1),t("option",{value:"24"},"24/trang",-1)]),544),[[D,v.value]])])])])]),j.value.length>0?(i(),a("div",mt,[s[14]||(s[14]=t("h3",{class:"fw-bold mb-3"},[t("i",{class:"bi bi-star-fill text-warning me-2"}),c("Bài viết nổi bật ")],-1)),t("div",gt,[(i(!0),a(h,null,_(j.value,e=>(i(),a("div",{key:e.id,class:"col-md-6 mb-3"},[t("div",ht,[t("img",{src:e.image,class:"card-img-top",style:{height:"200px","object-fit":"cover"}},null,8,_t),t("div",bt,[t("div",ft,[t("span",pt,n(e.category),1),t("small",yt,n(N(e.createdAt)),1)]),t("h5",xt,n(e.title),1),t("p",wt,n(e.content.substring(0,100))+"...",1),t("div",kt,[t("div",Ct,[t("img",{src:e.authorAvatar,class:"rounded-circle me-2",style:{width:"30px",height:"30px"}},null,8,Pt),t("small",null,n(e.authorName),1)]),I(m,{to:{name:"PostDetail",params:{id:e.id}},class:"btn btn-outline-warning btn-sm",onClick:r=>B(e.id)},{default:S(()=>s[13]||(s[13]=[c(" Đọc thêm ")])),_:2,__:[13]},1032,["to","onClick"])])])])]))),128))])])):P("",!0),t("div",St,[s[20]||(s[20]=t("h3",{class:"fw-bold mb-3"},[t("i",{class:"bi bi-journal-text me-2"}),c("Tất cả bài viết ")],-1)),M.value.length===0?(i(),a("div",Dt,s[15]||(s[15]=[t("i",{class:"bi bi-search display-1 text-muted"},null,-1),t("p",{class:"text-muted"},"Không tìm thấy bài viết nào",-1)]))):(i(),a("div",Vt,[(i(!0),a(h,null,_(M.value,e=>(i(),a("div",{key:e.id,class:"col-md-6 mb-4"},[t("div",jt,[t("img",{src:e.image,class:"card-img-top",style:{height:"200px","object-fit":"cover"}},null,8,Mt),t("div",Nt,[t("div",Bt,[t("span",Tt,n(e.category),1),t("small",$t,n(N(e.createdAt)),1)]),t("h5",It,n(e.title),1),t("p",At,n(e.content.substring(0,100))+"...",1),t("div",Lt,[t("div",Ut,[t("img",{src:e.authorAvatar,class:"rounded-circle me-2",style:{width:"30px",height:"30px"}},null,8,Ht),t("small",null,n(e.authorName),1)]),I(m,{to:{name:"PostDetail",params:{id:e.id}},class:"btn btn-outline-primary btn-sm",onClick:r=>B(e.id)},{default:S(()=>s[16]||(s[16]=[c(" Đọc thêm ")])),_:2,__:[16]},1032,["to","onClick"])])]),t("div",Ft,[t("div",Qt,[t("small",null,[s[17]||(s[17]=t("i",{class:"bi bi-eye me-1"},null,-1)),c(n(e.views)+" lượt xem",1)]),t("small",null,[s[18]||(s[18]=t("i",{class:"bi bi-chat me-1"},null,-1)),c(n(e.comments.length)+" bình luận",1)]),t("small",null,[s[19]||(s[19]=t("i",{class:"bi bi-heart me-1"},null,-1)),c(n(e.likes.length)+" lượt thích",1)])])])])]))),128))]))]),p.value>1?(i(),a("nav",qt,[t("ul",zt,[t("li",{class:V(["page-item",{disabled:d.value===1}])},[t("a",{class:"page-link",href:"#",onClick:s[4]||(s[4]=w(e=>k(d.value-1),["prevent"]))},"Trước")],2),(i(!0),a(h,null,_(H.value,e=>(i(),a("li",{key:e,class:V(["page-item",{active:e===d.value}])},[t("a",{class:"page-link",href:"#",onClick:w(r=>k(e),["prevent"])},n(e),9,Et)],2))),128)),t("li",{class:V(["page-item",{disabled:d.value===p.value}])},[t("a",{class:"page-link",href:"#",onClick:s[5]||(s[5]=w(e=>k(d.value+1),["prevent"]))},"Sau")],2)])])):P("",!0)]),t("div",Jt,[t("div",Kt,[s[21]||(s[21]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-fire me-2"}),c("Bài viết phổ biến")])],-1)),t("div",Rt,[(i(!0),a(h,null,_(L.value,e=>(i(),a("div",{key:e.id,class:"d-flex mb-3"},[t("img",{src:e.image,class:"rounded me-3",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,Xt),t("div",Yt,[t("h6",Gt,n(e.title.substring(0,50))+"...",1),t("small",Ot,n(e.views)+" lượt xem",1)])]))),128))])]),t("div",Wt,[s[22]||(s[22]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-tags me-2"}),c("Danh mục")])],-1)),t("div",Zt,[t("div",te,[(i(!0),a(h,null,_(U.value,e=>(i(),a("a",{key:e.value,href:"#",onClick:w(r=>E(e.value),["prevent"]),class:"text-decoration-none d-flex justify-content-between align-items-center py-2"},[t("span",null,n(e.label),1),t("span",se,n(e.count),1)],8,ee))),128))])])])])])])}}});export{ie as default};
